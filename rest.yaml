apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: pepsico service call 1.2
  title: Pepsico Rest
  description: The Pepsico Rest
  tags:
    - rest
    - pepsi
spec:
  owner: rhdh
  type: service
  parameters:
    - title: Provide Dev Flow Variables 
      required:
        - approvalcode
      properties:
        approvalcode:
          title: Service Now Approval Code
          type: string 


  
steps:
#  - id: backstage_request
#    name: backstage request
#    action: http:backstage:request
#    input:
#      method: 'GET'
#      path: 'https://api.thecatapi.com/v1/images/0XYvRd7oD'
#      headers:
#        content-type: 'application/json'


  - id: snowretrieve
    name: Verify ServiceNow Approval
    action: servicenow:now:table:retrieveRecord
    input:
      tableName: x_1520818_pepsico_pepsionboarding
      sysId: "${{ parameters.approvalcode }}"
      
#output:
#  getResponse: '{{ steps.backstage_request.output.body }}'
#  getCode: '{{ steps.backstage_request.output.code }}'
#  getHeaders: '{{ steps.backstage_request.output.headers }}'
